(function ($, Drupal) {

    'use strict';

    Drupal.behaviors.ibucalc = {
        attach: function (context, settings) {
            // get field value on change/keyup
            //var formClass = '.ibu-calculator';

          var form = ".paragraph-type--hops [data-drupal-selector*='edit-field-hops-']";

            var alphaAcids = 0;
            var hopWeight = 0;
            var hopContactTime = 0;
            var ibu = 0;
            var gravity = 0;
            var og = 0;
            var utilizationData = 0;
            var batchSize = 0;

             $(form + " input[type=number]").each(function() {

                $(this).on('autocompletechange change keyup', function () {

                  var $val = $(this).val();
                  var $name = $(this).attr("name");

                  // trzeba znalezc poprawny index albo dodac do twiga
                  var $index = $("tbody .paragraph-type--hops").index();

                    // to jest ok

                  console.log($(this).data('drupal-selector') + ' - ' + $val + ' - index: ' + $index);

                  //console.log($val);
                  //console.log($name);

                    alphaAcids = $("input.alpha-acid", context).val();
                    // hopWeight = $("input.hop-weight", context).val();
                    // hopContactTime = $("input.hop-contact-time", context).val();
                    // batchSize = $("input.batch-size", context).val();
                    //
                    // gravity = $("input.wort-gravity").val();
                    // og = platoToOG(gravity);
                    //
                    // // Crazy hop contact time fix.
                    // if (hopContactTime > 60 && hopContactTime < 65) {
                    //     hopContactTime = 60;
                    // }
                    // if (hopContactTime >= 65 && hopContactTime < 75) {
                    //     hopContactTime = 70;
                    // }
                    // if (hopContactTime >= 75 && hopContactTime < 85) {
                    //     hopContactTime = 80;
                    // }
                    // if (hopContactTime >= 85 && hopContactTime < 95) {
                    //     hopContactTime = 90;
                    // }
                    // if (hopContactTime >= 95 && hopContactTime < 105) {
                    //     hopContactTime = 100;
                    // }
                    // if (hopContactTime >= 105 && hopContactTime < 115) {
                    //     hopContactTime = 110;
                    // }
                    // if (hopContactTime >= 115 && hopContactTime < 126) {
                    //     hopContactTime = 120;
                    // }
                    // if (hopContactTime > 125) {
                    //     hopContactTime = 666;
                    // }
                    //
                    // // og fix.
                    // if (og < 1.030) {
                    //     og = 1.030;
                    // }
                    // if (og >= 1.030 && og < 1.035) {
                    //     og = 1.030;
                    // }
                    // if (og >= 1.035 && og < 1.045) {
                    //     og = 1.040;
                    // }
                    // if (og >= 1.045 && og < 1.055) {
                    //     og = 1.050;
                    // }
                    // if (og >= 1.055 && og < 1.065) {
                    //     og = 1.060;
                    // }
                    // if (og >= 1.065 && og < 1.075) {
                    //     og = 1.070;
                    // }
                    // if (og >= 1.075 && og < 1.085) {
                    //     og = 1.080;
                    // }
                    // if (og >= 1.085 && og < 1.095) {
                    //     og = 1.090;
                    // }
                    // if (og >= 1.095 && og < 1.105) {
                    //     og = 1.100;
                    // }
                    // if (og >= 1.105 && og < 1.115) {
                    //     og = 1.110;
                    // }
                    // if (og >= 1.115 && og < 1.125) {
                    //     og = 1.120;
                    // }
                    // if (og >= 1.125) {
                    //     og = 1.130;
                    // }
                    //
                    // utilizationData = calculateUtlilization(hopContactTime, og);
                    // ibu = (hopWeight * utilizationData * alphaAcids/100 * 1000) / (batchSize * og);
                    // if (ibu !== 0) {
                    //     $('.ibu-value').text("IBU: " + ibu.toFixed(0));
                    // }

                }).change();

            });

            function calculateUtlilization($contactTime, $og) {
                var utilization = {
                    0: {
                        1.030: 0.034,
                        1.040: 0.031,
                        1.050: 0.029,
                        1.060: 0.026,
                        1.070: 0.024,
                        1.080: 0.022,
                        1.090: 0.020,
                        1.100: 0.018,
                        1.110: 0.017,
                        1.120: 0.015,
                        1.130: 0.014
                    },
                    1: {
                        1.030: 0.034,
                        1.040: 0.031,
                        1.050: 0.029,
                        1.060: 0.026,
                        1.070: 0.024,
                        1.080: 0.022,
                        1.090: 0.020,
                        1.100: 0.018,
                        1.110: 0.017,
                        1.120: 0.015,
                        1.130: 0.014
                    },
                    2: {
                        1.030: 0.034,
                        1.040: 0.031,
                        1.050: 0.029,
                        1.060: 0.026,
                        1.070: 0.024,
                        1.080: 0.022,
                        1.090: 0.020,
                        1.100: 0.018,
                        1.110: 0.017,
                        1.120: 0.015,
                        1.130: 0.014
                    },
                    3: {
                        1.030: 0.034,
                        1.040: 0.031,
                        1.050: 0.029,
                        1.060: 0.026,
                        1.070: 0.024,
                        1.080: 0.022,
                        1.090: 0.020,
                        1.100: 0.018,
                        1.110: 0.017,
                        1.120: 0.015,
                        1.130: 0.014
                    },
                    4: {
                        1.030: 0.034,
                        1.040: 0.031,
                        1.050: 0.029,
                        1.060: 0.026,
                        1.070: 0.024,
                        1.080: 0.022,
                        1.090: 0.020,
                        1.100: 0.018,
                        1.110: 0.017,
                        1.120: 0.015,
                        1.130: 0.014
                    },
                    5: {
                        1.030: 0.065,
                        1.040: 0.059,
                        1.050: 0.054,
                        1.060: 0.049,
                        1.070: 0.045,
                        1.080: 0.041,
                        1.090: 0.038,
                        1.100: 0.035,
                        1.110: 0.032,
                        1.120: 0.029,
                        1.130: 0.026
                    },
                    6: {
                        1.030: 0.065,
                        1.040: 0.059,
                        1.050: 0.054,
                        1.060: 0.049,
                        1.070: 0.045,
                        1.080: 0.041,
                        1.090: 0.038,
                        1.100: 0.035,
                        1.110: 0.032,
                        1.120: 0.029,
                        1.130: 0.026
                    },
                    7: {
                        1.030: 0.065,
                        1.040: 0.059,
                        1.050: 0.054,
                        1.060: 0.049,
                        1.070: 0.045,
                        1.080: 0.041,
                        1.090: 0.038,
                        1.100: 0.035,
                        1.110: 0.032,
                        1.120: 0.029,
                        1.130: 0.026
                    },
                    8: {
                        1.030: 0.065,
                        1.040: 0.059,
                        1.050: 0.054,
                        1.060: 0.049,
                        1.070: 0.045,
                        1.080: 0.041,
                        1.090: 0.038,
                        1.100: 0.035,
                        1.110: 0.032,
                        1.120: 0.029,
                        1.130: 0.026
                    },
                    9: {
                        1.030: 0.092,
                        1.040: 0.084,
                        1.050: 0.077,
                        1.060: 0.070,
                        1.070: 0.064,
                        1.080: 0.059,
                        1.090: 0.054,
                        1.100: 0.049,
                        1.110: 0.045,
                        1.120: 0.041,
                        1.130: 0.037
                    },
                    10: {
                        1.030: 0.092,
                        1.040: 0.084,
                        1.050: 0.077,
                        1.060: 0.070,
                        1.070: 0.064,
                        1.080: 0.059,
                        1.090: 0.054,
                        1.100: 0.049,
                        1.110: 0.045,
                        1.120: 0.041,
                        1.130: 0.037
                    },
                    11: {
                        1.030: 0.092,
                        1.040: 0.084,
                        1.050: 0.077,
                        1.060: 0.070,
                        1.070: 0.064,
                        1.080: 0.059,
                        1.090: 0.054,
                        1.100: 0.049,
                        1.110: 0.045,
                        1.120: 0.041,
                        1.130: 0.037
                    },
                    12: {
                        1.030: 0.116,
                        1.040: 0.106,
                        1.050: 0.097,
                        1.060: 0.088,
                        1.070: 0.081,
                        1.080: 0.074,
                        1.090: 0.068,
                        1.100: 0.062,
                        1.110: 0.056,
                        1.120: 0.052,
                        1.130: 0.047
                    },
                    13: {
                        1.030: 0.116,
                        1.040: 0.106,
                        1.050: 0.097,
                        1.060: 0.088,
                        1.070: 0.081,
                        1.080: 0.074,
                        1.090: 0.068,
                        1.100: 0.062,
                        1.110: 0.056,
                        1.120: 0.052,
                        1.130: 0.047
                    },
                    14: {
                        1.030: 0.116,
                        1.040: 0.106,
                        1.050: 0.097,
                        1.060: 0.088,
                        1.070: 0.081,
                        1.080: 0.074,
                        1.090: 0.068,
                        1.100: 0.062,
                        1.110: 0.056,
                        1.120: 0.052,
                        1.130: 0.047
                    },
                    15: {
                        1.030: 0.137,
                        1.040: 0.125,
                        1.050: 0.114,
                        1.060: 0.105,
                        1.070: 0.096,
                        1.080: 0.087,
                        1.090: 0.080,
                        1.100: 0.073,
                        1.110: 0.067,
                        1.120: 0.061,
                        1.130: 0.056
                    },
                    16: {
                        1.030: 0.137,
                        1.040: 0.125,
                        1.050: 0.114,
                        1.060: 0.105,
                        1.070: 0.096,
                        1.080: 0.087,
                        1.090: 0.080,
                        1.100: 0.073,
                        1.110: 0.067,
                        1.120: 0.061,
                        1.130: 0.056
                    },
                    17: {
                        1.030: 0.137,
                        1.040: 0.125,
                        1.050: 0.114,
                        1.060: 0.105,
                        1.070: 0.096,
                        1.080: 0.087,
                        1.090: 0.080,
                        1.100: 0.073,
                        1.110: 0.067,
                        1.120: 0.061,
                        1.130: 0.056
                    },
                    18: {
                        1.030: 0.156,
                        1.040: 0.142,
                        1.050: 0.130,
                        1.060: 0.119,
                        1.070: 0.109,
                        1.080: 0.099,
                        1.090: 0.091,
                        1.100: 0.083,
                        1.110: 0.076,
                        1.120: 0.069,
                        1.130: 0.063
                    },
                    19: {
                        1.030: 0.156,
                        1.040: 0.142,
                        1.050: 0.130,
                        1.060: 0.119,
                        1.070: 0.109,
                        1.080: 0.099,
                        1.090: 0.091,
                        1.100: 0.083,
                        1.110: 0.076,
                        1.120: 0.069,
                        1.130: 0.063
                    },
                    20: {
                        1.030: 0.156,
                        1.040: 0.142,
                        1.050: 0.130,
                        1.060: 0.119,
                        1.070: 0.109,
                        1.080: 0.099,
                        1.090: 0.091,
                        1.100: 0.083,
                        1.110: 0.076,
                        1.120: 0.069,
                        1.130: 0.063
                    },
                    21: {
                        1.030: 0.173,
                        1.040: 0.158,
                        1.050: 0.144,
                        1.060: 0.132,
                        1.070: 0.120,
                        1.080: 0.110,
                        1.090: 0.101,
                        1.100: 0.092,
                        1.110: 0.084,
                        1.120: 0.077,
                        1.130: 0.070
                    },
                    22: {
                        1.030: 0.173,
                        1.040: 0.158,
                        1.050: 0.144,
                        1.060: 0.132,
                        1.070: 0.120,
                        1.080: 0.110,
                        1.090: 0.101,
                        1.100: 0.092,
                        1.110: 0.084,
                        1.120: 0.077,
                        1.130: 0.070
                    },
                    23: {
                        1.030: 0.173,
                        1.040: 0.158,
                        1.050: 0.144,
                        1.060: 0.132,
                        1.070: 0.120,
                        1.080: 0.110,
                        1.090: 0.101,
                        1.100: 0.092,
                        1.110: 0.084,
                        1.120: 0.077,
                        1.130: 0.070
                    },
                    24: {
                        1.030: 0.187,
                        1.040: 0.171,
                        1.050: 0.157,
                        1.060: 0.143,
                        1.070: 0.131,
                        1.080: 0.120,
                        1.090: 0.109,
                        1.100: 0.100,
                        1.110: 0.091,
                        1.120: 0.083,
                        1.130: 0.076
                    },
                    25: {
                        1.030: 0.187,
                        1.040: 0.171,
                        1.050: 0.157,
                        1.060: 0.143,
                        1.070: 0.131,
                        1.080: 0.120,
                        1.090: 0.109,
                        1.100: 0.100,
                        1.110: 0.091,
                        1.120: 0.083,
                        1.130: 0.076
                    },
                    26: {
                        1.030: 0.187,
                        1.040: 0.171,
                        1.050: 0.157,
                        1.060: 0.143,
                        1.070: 0.131,
                        1.080: 0.120,
                        1.090: 0.109,
                        1.100: 0.100,
                        1.110: 0.091,
                        1.120: 0.083,
                        1.130: 0.076
                    },
                    27: {
                        1.030: 0.201,
                        1.040: 0.183,
                        1.050: 0.168,
                        1.060: 0.153,
                        1.070: 0.140,
                        1.080: 0.128,
                        1.090: 0.117,
                        1.100: 0.107,
                        1.110: 0.098,
                        1.120: 0.089,
                        1.130: 0.082
                    },
                    28: {
                        1.030: 0.201,
                        1.040: 0.183,
                        1.050: 0.168,
                        1.060: 0.153,
                        1.070: 0.140,
                        1.080: 0.128,
                        1.090: 0.117,
                        1.100: 0.107,
                        1.110: 0.098,
                        1.120: 0.089,
                        1.130: 0.082
                    },
                    29: {
                        1.030: 0.201,
                        1.040: 0.183,
                        1.050: 0.168,
                        1.060: 0.153,
                        1.070: 0.140,
                        1.080: 0.128,
                        1.090: 0.117,
                        1.100: 0.107,
                        1.110: 0.098,
                        1.120: 0.089,
                        1.130: 0.082
                    },
                    30: {
                        1.030: 0.212,
                        1.040: 0.194,
                        1.050: 0.177,
                        1.060: 0.162,
                        1.070: 0.148,
                        1.080: 0.135,
                        1.090: 0.124,
                        1.100: 0.113,
                        1.110: 0.103,
                        1.120: 0.094,
                        1.130: 0.086
                    },
                    31: {
                        1.030: 0.212,
                        1.040: 0.194,
                        1.050: 0.177,
                        1.060: 0.162,
                        1.070: 0.148,
                        1.080: 0.135,
                        1.090: 0.124,
                        1.100: 0.113,
                        1.110: 0.103,
                        1.120: 0.094,
                        1.130: 0.086
                    },
                    32: {
                        1.030: 0.212,
                        1.040: 0.194,
                        1.050: 0.177,
                        1.060: 0.162,
                        1.070: 0.148,
                        1.080: 0.135,
                        1.090: 0.124,
                        1.100: 0.113,
                        1.110: 0.103,
                        1.120: 0.094,
                        1.130: 0.086
                    },
                    33: {
                        1.030: 0.223,
                        1.040: 0.203,
                        1.050: 0.186,
                        1.060: 0.170,
                        1.070: 0.155,
                        1.080: 0.142,
                        1.090: 0.130,
                        1.100: 0.119,
                        1.110: 0.108,
                        1.120: 0.099,
                        1.130: 0.091
                    },
                    34: {
                        1.030: 0.223,
                        1.040: 0.203,
                        1.050: 0.186,
                        1.060: 0.170,
                        1.070: 0.155,
                        1.080: 0.142,
                        1.090: 0.130,
                        1.100: 0.119,
                        1.110: 0.108,
                        1.120: 0.099,
                        1.130: 0.091
                    },
                    35: {
                        1.030: 0.223,
                        1.040: 0.203,
                        1.050: 0.186,
                        1.060: 0.170,
                        1.070: 0.155,
                        1.080: 0.142,
                        1.090: 0.130,
                        1.100: 0.119,
                        1.110: 0.108,
                        1.120: 0.099,
                        1.130: 0.091
                    },
                    36: {
                        1.030: 0.232,
                        1.040: 0.212,
                        1.050: 0.194,
                        1.060: 0.177,
                        1.070: 0.162,
                        1.080: 0.148,
                        1.090: 0.135,
                        1.100: 0.124,
                        1.110: 0.113,
                        1.120: 0.103,
                        1.130: 0.094
                    },
                    37: {
                        1.030: 0.232,
                        1.040: 0.212,
                        1.050: 0.194,
                        1.060: 0.177,
                        1.070: 0.162,
                        1.080: 0.148,
                        1.090: 0.135,
                        1.100: 0.124,
                        1.110: 0.113,
                        1.120: 0.103,
                        1.130: 0.094
                    },
                    38: {
                        1.030: 0.232,
                        1.040: 0.212,
                        1.050: 0.194,
                        1.060: 0.177,
                        1.070: 0.162,
                        1.080: 0.148,
                        1.090: 0.135,
                        1.100: 0.124,
                        1.110: 0.113,
                        1.120: 0.103,
                        1.130: 0.094
                    },
                    39: {
                        1.030: 0.240,
                        1.040: 0.219,
                        1.050: 0.200,
                        1.060: 0.183,
                        1.070: 0.167,
                        1.080: 0.153,
                        1.090: 0.140,
                        1.100: 0.128,
                        1.110: 0.117,
                        1.120: 0.107,
                        1.130: 0.098
                    },
                    40: {
                        1.030: 0.240,
                        1.040: 0.219,
                        1.050: 0.200,
                        1.060: 0.183,
                        1.070: 0.167,
                        1.080: 0.153,
                        1.090: 0.140,
                        1.100: 0.128,
                        1.110: 0.117,
                        1.120: 0.107,
                        1.130: 0.098
                    },
                    41: {
                        1.030: 0.240,
                        1.040: 0.219,
                        1.050: 0.200,
                        1.060: 0.183,
                        1.070: 0.167,
                        1.080: 0.153,
                        1.090: 0.140,
                        1.100: 0.128,
                        1.110: 0.117,
                        1.120: 0.107,
                        1.130: 0.098
                    },
                    42: {
                        1.030: 0.247,
                        1.040: 0.226,
                        1.050: 0.206,
                        1.060: 0.189,
                        1.070: 0.172,
                        1.080: 0.158,
                        1.090: 0.144,
                        1.100: 0.132,
                        1.110: 0.120,
                        1.120: 0.110,
                        1.130: 0.101
                    },
                    43: {
                        1.030: 0.247,
                        1.040: 0.226,
                        1.050: 0.206,
                        1.060: 0.189,
                        1.070: 0.172,
                        1.080: 0.158,
                        1.090: 0.144,
                        1.100: 0.132,
                        1.110: 0.120,
                        1.120: 0.110,
                        1.130: 0.101
                    },
                    44: {
                        1.030: 0.247,
                        1.040: 0.226,
                        1.050: 0.206,
                        1.060: 0.189,
                        1.070: 0.172,
                        1.080: 0.158,
                        1.090: 0.144,
                        1.100: 0.132,
                        1.110: 0.120,
                        1.120: 0.110,
                        1.130: 0.101
                    },
                    45: {
                        1.030: 0.253,
                        1.040: 0.232,
                        1.050: 0.212,
                        1.060: 0.194,
                        1.070: 0.177,
                        1.080: 0.162,
                        1.090: 0.148,
                        1.100: 0.135,
                        1.110: 0.123,
                        1.120: 0.113,
                        1.130: 0.103
                    },
                    46: {
                        1.030: 0.253,
                        1.040: 0.232,
                        1.050: 0.212,
                        1.060: 0.194,
                        1.070: 0.177,
                        1.080: 0.162,
                        1.090: 0.148,
                        1.100: 0.135,
                        1.110: 0.123,
                        1.120: 0.113,
                        1.130: 0.103
                    },
                    47: {
                        1.030: 0.253,
                        1.040: 0.232,
                        1.050: 0.212,
                        1.060: 0.194,
                        1.070: 0.177,
                        1.080: 0.162,
                        1.090: 0.148,
                        1.100: 0.135,
                        1.110: 0.123,
                        1.120: 0.113,
                        1.130: 0.103
                    },
                    48: {
                        1.030: 0.259,
                        1.040: 0.237,
                        1.050: 0.216,
                        1.060: 0.198,
                        1.070: 0.181,
                        1.080: 0.165,
                        1.090: 0.151,
                        1.100: 0.138,
                        1.110: 0.126,
                        1.120: 0.115,
                        1.130: 0.105
                    },
                    49: {
                        1.030: 0.259,
                        1.040: 0.237,
                        1.050: 0.216,
                        1.060: 0.198,
                        1.070: 0.181,
                        1.080: 0.165,
                        1.090: 0.151,
                        1.100: 0.138,
                        1.110: 0.126,
                        1.120: 0.115,
                        1.130: 0.105
                    },
                    50: {
                        1.030: 0.259,
                        1.040: 0.237,
                        1.050: 0.216,
                        1.060: 0.198,
                        1.070: 0.181,
                        1.080: 0.165,
                        1.090: 0.151,
                        1.100: 0.138,
                        1.110: 0.126,
                        1.120: 0.115,
                        1.130: 0.105
                    },
                    51: {
                        1.030: 0.264,
                        1.040: 0.241,
                        1.050: 0.221,
                        1.060: 0.202,
                        1.070: 0.184,
                        1.080: 0.169,
                        1.090: 0.154,
                        1.100: 0.141,
                        1.110: 0.129,
                        1.120: 0.118,
                        1.130: 0.108
                    },
                    52: {
                        1.030: 0.264,
                        1.040: 0.241,
                        1.050: 0.221,
                        1.060: 0.202,
                        1.070: 0.184,
                        1.080: 0.169,
                        1.090: 0.154,
                        1.100: 0.141,
                        1.110: 0.129,
                        1.120: 0.118,
                        1.130: 0.108
                    },
                    53: {
                        1.030: 0.264,
                        1.040: 0.241,
                        1.050: 0.221,
                        1.060: 0.202,
                        1.070: 0.184,
                        1.080: 0.169,
                        1.090: 0.154,
                        1.100: 0.141,
                        1.110: 0.129,
                        1.120: 0.118,
                        1.130: 0.108
                    },
                    54: {
                        1.030: 0.269,
                        1.040: 0.246,
                        1.050: 0.224,
                        1.060: 0.205,
                        1.070: 0.188,
                        1.080: 0.171,
                        1.090: 0.157,
                        1.100: 0.143,
                        1.110: 0.131,
                        1.120: 0.120,
                        1.130: 0.109
                    },
                    55: {
                        1.030: 0.269,
                        1.040: 0.246,
                        1.050: 0.224,
                        1.060: 0.205,
                        1.070: 0.188,
                        1.080: 0.171,
                        1.090: 0.157,
                        1.100: 0.143,
                        1.110: 0.131,
                        1.120: 0.120,
                        1.130: 0.109
                    },
                    56: {
                        1.030: 0.269,
                        1.040: 0.246,
                        1.050: 0.224,
                        1.060: 0.205,
                        1.070: 0.188,
                        1.080: 0.171,
                        1.090: 0.157,
                        1.100: 0.143,
                        1.110: 0.131,
                        1.120: 0.120,
                        1.130: 0.109
                    },
                    57: {
                        1.030: 0.273,
                        1.040: 0.249,
                        1.050: 0.228,
                        1.060: 0.208,
                        1.070: 0.190,
                        1.080: 0.174,
                        1.090: 0.159,
                        1.100: 0.145,
                        1.110: 0.133,
                        1.120: 0.121,
                        1.130: 0.111
                    },
                    58: {
                        1.030: 0.273,
                        1.040: 0.249,
                        1.050: 0.228,
                        1.060: 0.208,
                        1.070: 0.190,
                        1.080: 0.174,
                        1.090: 0.159,
                        1.100: 0.145,
                        1.110: 0.133,
                        1.120: 0.121,
                        1.130: 0.111
                    },
                    59: {
                        1.030: 0.273,
                        1.040: 0.249,
                        1.050: 0.228,
                        1.060: 0.208,
                        1.070: 0.190,
                        1.080: 0.174,
                        1.090: 0.159,
                        1.100: 0.145,
                        1.110: 0.133,
                        1.120: 0.121,
                        1.130: 0.111
                    },
                    60: {
                        1.030: 0.276,
                        1.040: 0.252,
                        1.050: 0.231,
                        1.060: 0.211,
                        1.070: 0.193,
                        1.080: 0.176,
                        1.090: 0.161,
                        1.100: 0.147,
                        1.110: 0.135,
                        1.120: 0.123,
                        1.130: 0.112
                    },
                    70: {
                        1.030: 0.285,
                        1.040: 0.261,
                        1.050: 0.238,
                        1.060: 0.218,
                        1.070: 0.199,
                        1.080: 0.182,
                        1.090: 0.166,
                        1.100: 0.152,
                        1.110: 0.139,
                        1.120: 0.127,
                        1.130: 0.116
                    },
                    80: {
                        1.030: 0.291,
                        1.040: 0.266,
                        1.050: 0.243,
                        1.060: 0.222,
                        1.070: 0.203,
                        1.080: 0.186,
                        1.090: 0.170,
                        1.100: 0.155,
                        1.110: 0.142,
                        1.120: 0.130,
                        1.130: 0.119
                    },
                    90: {
                        1.030: 0.295,
                        1.040: 0.270,
                        1.050: 0.247,
                        1.060: 0.226,
                        1.070: 0.206,
                        1.080: 0.188,
                        1.090: 0.172,
                        1.100: 0.157,
                        1.110: 0.144,
                        1.120: 0.132,
                        1.130: 0.120
                    },
                    100: {
                        1.030: 0.298,
                        1.040: 0.272,
                        1.050: 0.249,
                        1.060: 0.228,
                        1.070: 0.208,
                        1.080: 0.190,
                        1.090: 0.174,
                        1.100: 0.159,
                        1.110: 0.145,
                        1.120: 0.133,
                        1.130: 0.121
                    },
                    110: {
                        1.030: 0.300,
                        1.040: 0.274,
                        1.050: 0.251,
                        1.060: 0.229,
                        1.070: 0.209,
                        1.080: 0.191,
                        1.090: 0.175,
                        1.100: 0.160,
                        1.110: 0.146,
                        1.120: 0.134,
                        1.130: 0.122
                    },
                    120: {
                        1.030: 0.301,
                        1.040: 0.275,
                        1.050: 0.252,
                        1.060: 0.230,
                        1.070: 0.210,
                        1.080: 0.192,
                        1.090: 0.176,
                        1.100: 0.161,
                        1.110: 0.147,
                        1.120: 0.134,
                        1.130: 0.123
                    }
                };

                if ($contactTime <= 1) {
                    return 0;
                } else if($og > 1.130) {
                    return utilization[$contactTime][1.130];
                } else {
                    return utilization[$contactTime][$og];
                }

            }

            function platoToOG($plato) {
                var sg = 0;
                if ($plato > 0) {
                    sg = 1 + ($plato / (258.6 - (($plato / 258.2) * 227.1)));
                }

                return sg.toFixed(3);
            }
        }
    };


})(jQuery, Drupal);
